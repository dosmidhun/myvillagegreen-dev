{% comment %}
Refined tags
{% endcomment %}
{% if current_tags == blank %}
{% assign has_refined = false %}
{% else %}
{% assign has_refined = true %} 
{% endif %}

{% if section.settings.enable_shop_by_tags_1 or section.settings.enable_shop_by_tags_2 or section.settings.enable_shop_by_tags_3 or section.settings.enable_shop_by_tags_4 %}
<div class="refined-widgets">
  <span {% if settings.enable_multilang %}data-translate="collections.sidebar.refined_by"{% endif %}>{{ 'collections.sidebar.refined_by' | t}}</span>

  <ul class="refined selected-tag">    
    {% if collection.handle != 'all' %}
    <li><a href="javascript:void(0)" class="selected-collection">{{collection.title}}{% comment %}<span>X</span>{% endcomment %}</a></li>
    {% endif %}
    {% for t in current_tags %}
    {% assign tag = t | strip %}
    {% assign tag_value = tag | handleize %}
    <li>
      <!--       <a href="javascript:void(0)" class="selected-tag">{{tag}}{% comment %}<span>X</span>{% endcomment %}</a> -->
      <input type="checkbox" value="{{ tag_value }}" {% if current_tags contains tag %}checked{% endif %}/>
      <a href="javascript:void(0)" {% if current_tags contains tag %} class="active" {% endif %}>
        {{tag}}<span>X</span>
      </a>
    </li>
    {% endfor %}
  </ul>
  <a href="javascript:void(0)" class="clear-all" {% if has_refined == false %}style="display:none"{% endif %} {% if settings.enable_multilang %}data-translate="collections.sidebar.clear_all"{% endif %}>
    {{ 'collections.sidebar.clear_all' | t }}
  </a>
</div>
{% endif %}

<div class="sidebar-block">

  {% if section.settings.enable_shop_by_tags_1 %}
  <div class="sidebar-custom sidebar-tag color">
    {% assign tags = settings.shop_by_tags_1_list_tags | split: ',' %}
    <div class="widget-title">
      {% if settings.enable_multilang %}
      <span class="lang1">{{ section.settings.shop_by_tags_1_title | split: '|' | first }}</span>
      <span class="lang2">{{ section.settings.shop_by_tags_1_title | split: '|' | last }}</span>
      {% else %}
      <span>{{ section.settings.shop_by_tags_1_title | split: '|' | first }}</span>
      {% endif %}
      <a href="javascript:void(0)" class="clear" style="display:none" {% if settings.enable_multilang %}data-translate="collections.sidebar.clear"{% endif %}>
        {{ 'collections.sidebar.clear' | t }}
      </a>
    </div>
    <div class="widget-content">
      <ul>
        {% for block in section.blocks %}

        {% if block.settings.title != blank %}
        {% assign tag = block.settings.title | strip %} 
        {% if collection.tags contains tag %} 
        <li>
          {% assign tag_value = tag | handleize %}
          <input type="checkbox" value="{{ tag_value }}" {% if current_tags contains tag %}checked{% endif %}/>
          <a href="javascript:void(0)"  {% if current_tags contains tag %} class="active" {% endif %} title="{{tag}}">
            <img src="{{ block.settings.shop_color | img_url }}" alt=""/>
          </a>
        </li>
        {% endif %}
        {% endif %}      
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  {% if section.settings.enable_shop_by_tags_2 %}
  <div class="sidebar-custom sidebar-tag size">
    {% assign tags = section.settings.shop_by_tags_2_list_tags | split: ',' %}
    <div class="widget-title">
      {% if settings.enable_multilang %}
      <span class="lang1">{{ section.settings.shop_by_tags_2_title | split: '|' | first }}</span>
      <span class="lang2">{{ section.settings.shop_by_tags_2_title | split: '|' | last }}</span>
      {% else %}
      <span>{{ section.settings.shop_by_tags_2_title | split: '|' | first }}</span>
      {% endif %}
      <a href="javascript:void(0)" class="clear" style="display:none" {% if settings.enable_multilang %}data-translate="collections.sidebar.clear"{% endif %}>
        {{ 'collections.sidebar.clear' | t }}
      </a>
    </div>
    <div class="widget-content">
      <ul>
        {% for t in tags %}
        {% assign tag = t | strip %}
        {% assign tag_value = tag | handleize %}      
        {% if current_tags contains tag %}
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}" checked/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}" checked/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}" checked/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li>
        {% else %}
        {% if collection.tags contains tag %} 
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}"/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}"/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}"/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li>
        {% endif %}
        {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  {% if section.settings.enable_shop_by_tags_3 %}
  <div class="sidebar-custom sidebar-tag">
    {% assign tags = section.settings.shop_by_tags_3_list_tags | split: ',' %}
    <div class="widget-title">
      {% if settings.enable_multilang %}
      <span class="lang1">{{ section.settings.shop_by_tags_3_title | split: '|' | first }}</span>
      <span class="lang2">{{ section.settings.shop_by_tags_3_title | split: '|' | last }}</span>
      {% else %}
      <span>{{ section.settings.shop_by_tags_3_title | split: '|' | first }}</span>
      {% endif %}
      <a href="javascript:void(0)" class="clear" style="display:none" {% if settings.enable_multilang %}data-translate="collections.sidebar.clear"{% endif %}>
        {{ 'collections.sidebar.clear' | t }}
      </a>
    </div>
    <div class="widget-content">
      <ul>
        {% for t in tags %}
        {% assign tag = t | strip %}
        {% assign tag_value = tag | handleize %}      
        {% if current_tags contains tag %}
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}" checked/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}" checked/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}" checked/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li>
        {% else %}
        {% if collection.tags contains tag %} 
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}"/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}"/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}"/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li>
        {% endif %}
        {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  {% if section.settings.enable_shop_by_tags_4 %}
  <div class="sidebar-custom sidebar-tag brand">
    {% assign tags = section.settings.shop_by_tags_4_list_tags | split: ',' %}
    <div class="widget-title">
      {% if settings.enable_multilang %}
      <span class="lang1">{{ section.settings.shop_by_tags_4_title | split: '|' | first }}</span>
      <span class="lang2">{{ section.settings.shop_by_tags_4_title | split: '|' | last }}</span>
      {% else %}
      <span>{{ section.settings.shop_by_tags_4_title | split: '|' | first }}</span>
      {% endif %}
      <a href="javascript:void(0)" class="clear" style="display:none" {% if settings.enable_multilang %}data-translate="collections.sidebar.clear"{% endif %}>
        {{ 'collections.sidebar.clear' | t }}
      </a>
    </div>
    <div class="widget-content">
      <ul>
        {% for t in tags %}
        {% assign tag = t | strip %}
        {% assign tag_value = tag | handleize %}      
        {% if current_tags contains tag %}
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}" checked/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}" checked/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}" checked/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li>
        {% else %}      	
        {% if collection.tags contains tag %} 
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}"/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}"/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}"/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li> 
        {% endif %}
        {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  {% if section.settings.enable_shop_by_tags_5 %}
  <div class="sidebar-custom sidebar-tag product-type">
    {% assign tags = section.settings.shop_by_tags_5_list_tags | split: ',' %}
    <div class="widget-title">
      {% if settings.enable_multilang %}
      <span class="lang1">{{ section.settings.shop_by_tags_5_title | split: '|' | first }}</span>
      <span class="lang2">{{ section.settings.shop_by_tags_5_title | split: '|' | last }}</span>
      {% else %}
      <span>{{ section.settings.shop_by_tags_5_title | split: '|' | first }}</span>
      {% endif %}
      <a href="javascript:void(0)" class="clear" style="display:none" {% if settings.enable_multilang %}data-translate="collections.sidebar.clear"{% endif %}>
        {{ 'collections.sidebar.clear' | t }}
      </a>
    </div>
    <div class="widget-content">
      <ul>
        {% for t in tags %}
        {% assign tag = t | strip %}
        {% assign tag_value = tag | handleize %}      
        {% if current_tags contains tag %}
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}" checked/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}" checked/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}" checked/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li>
        {% else %}      	
        {% if collection.tags contains tag %} 
        <li>
          {% if settings.enable_multilang %}
          <input type="checkbox" class="lang1" value="{{ tag_value | split: '|' | first }}"/>
          <label class="lang1">{{ tag | split: '|' | first }}</label>
          <input type="checkbox" class="lang2" value="{{ tag_value | split: '|' | last }}"/>
          <label class="lang2">{{ tag | split: '|' | last }}</label>
          {% else %}
          <input type="checkbox" value="{{ tag_value | split: '|' | first }}"/>
          <label>{{ tag | split: '|' | first }}</label>
          {% endif %}
        </li> 
        {% endif %}
        {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}
</div>

{% schema %}
  {
    "name": "Collection Sidebar",
    "settings": [
	  {
        "type": "header",
        "content": "Shop by Size"
      },
      {
        "type": "checkbox",
        "id": "enable_shop_by_tags_2",
        "label": "Enable",
        "default": true
      },
      {
        "type": "text",
        "id": "shop_by_tags_2_title",
        "label": "Shop by tags 2 title",
        "default": "Shop By Size",
        "info": "i.e \"Shop by Size\"."
      },
      {
        "type": "textarea",
        "id": "shop_by_tags_2_list_tags",
        "label": "Shop by tags 2 list",
        "info": "Separate by a comma, i.e \"XS, S, M, L, XL\"."
      },
      {
        "type": "header",
        "content": "Shop by Price"
      },
      {
        "type": "checkbox",
        "id": "enable_shop_by_tags_3",
        "label": "Enable",
        "default": true
      },
      {
        "type": "text",
        "id": "shop_by_tags_3_title",
        "label": "Shop by tags 3 title",
        "info": "i.e \"Shop by Price\"."
      },
      {
        "type": "textarea",
        "id": "shop_by_tags_3_list_tags",
        "label": "Shop by tags 3 list",
        "info": "Separate by a comma, i.e \"$100 - $300, $300 - $500\"."
      },
      {
        "type": "header",
        "content": "Shop by Brand"
      },
      {
        "type": "checkbox",
        "id": "enable_shop_by_tags_4",
        "label": "Enable",
        "default": true
      },
      {
        "type": "text",
        "id": "shop_by_tags_4_title",
        "label": "Shop by tags 4 title",
        "info": "i.e \"Shop by Brand\"."
      },
      {
        "type": "textarea",
        "id": "shop_by_tags_4_list_tags",
        "label": "Shop by tags 4 list",
        "info": "Separate by a comma, i.e \"Dior, Chanel...\"."
      },
	  {
        "type": "header",
        "content": "Shop by Type"
      },
      {
        "type": "checkbox",
        "id": "enable_shop_by_tags_5",
        "label": "Enable",
        "default": true
      },
      {
        "type": "text",
        "id": "shop_by_tags_5_title",
        "label": "Shop by tags 5 title",
        "info": "i.e \"Shop by Type\"."
      },
      {
        "type": "textarea",
        "id": "shop_by_tags_5_list_tags",
        "label": "Shop by tags 5 list",
        "info": "Separate by a comma, i.e \"Dior, Chanel...\"."
      },
      {
        "type": "header",
        "content": "Shop by Color"
      },
      {
        "type": "checkbox",
        "id": "enable_shop_by_tags_1",
        "label": "Enable",
        "default": true
      },
      {
        "type": "text",
        "id": "shop_by_tags_1_title",
        "label": "Shop by tags 1 title",
        "default": "Color",
        "info": "i.e \"Color\"."
      }
    ],
	"blocks" :[
	  {
        "type": "color",
        "name": "Color",
        "settings": [
          {
          "type": "text",
          "id": "title",
          "label": "Name Color"
          },
          {
          "type": "image_picker",
          "id": "shop_color",
          "label": "Color"
          }
        ]
	  }
	]
  }
{% endschema %}